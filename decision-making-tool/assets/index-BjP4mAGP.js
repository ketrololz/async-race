const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./options-a3zkT5xn.js","./buttonComponent-jrpZUZGk.js","./wheel-DpM_Kv5d.js","./notFound-BWLvRKmZ.js"])))=>i.map(i=>d[i]);
var E=Object.defineProperty;var L=(s,t,e)=>t in s?E(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var l=(s,t,e)=>L(s,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function e(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(i){if(i.ep)return;i.ep=!0;const n=e(i);fetch(i.href,n)}})();class w{constructor({tag:t,className:e="",text:o=""},...i){l(this,"_node");const n=document.createElement(t);n.className=e,n.textContent=o,this._node=n,i&&this.appendChildren(i)}appendChildren(t){t.forEach(e=>this._node.appendChild(e))}getNode(){return this._node}getChildren(){const t=[];return this._node.childNodes.forEach(e=>{e instanceof HTMLElement&&t.push(e)}),t}setText(t){this._node.textContent=t}setAttribute(t,e){this._node.setAttribute(t,e)}removeAttribute(t){this._node.removeAttribute(t)}toggleClass(t){this._node.classList.toggle(t)}addListener(t,e,o){this._node.addEventListener(t,e,o)}removeListener(t,e,o){this._node.removeEventListener(t,e,o)}destroyChildren(){this.getChildren().forEach(t=>t.remove())}destroyNode(){this.destroyChildren(),this._node.remove()}}const O="modulepreload",v=function(s,t){return new URL(s,t).href},_={},p=function(t,e,o){let i=Promise.resolve();if(e&&e.length>0){const a=document.getElementsByTagName("link"),r=document.querySelector("meta[property=csp-nonce]"),S=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));i=Promise.allSettled(e.map(d=>{if(d=v(d,o),d in _)return;_[d]=!0;const h=d.endsWith(".css"),I=h?'[rel="stylesheet"]':"";if(!!o)for(let u=a.length-1;u>=0;u--){const m=a[u];if(m.href===d&&(!h||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${I}`))return;const c=document.createElement("link");if(c.rel=h?"stylesheet":O,h||(c.as="script"),c.crossOrigin="",c.href=d,S&&c.setAttribute("nonce",S),document.head.appendChild(c),h)return new Promise((u,m)=>{c.addEventListener("load",u),c.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${d}`)))})}))}function n(a){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=a,window.dispatchEvent(r),!r.defaultPrevented)throw a}return i.then(a=>{for(const r of a||[])r.status==="rejected"&&n(r.reason);return t().catch(n)})},N=""+new URL("spin-BfYaVbIp.mp3",import.meta.url).href,y=""+new URL("end-yhFbNxa7.mp3",import.meta.url).href,C=""+new URL("start-hCxs3DZh.mp3",import.meta.url).href,f=1,k=Math.PI*2,W=10,x=.65,z=200,B=5,J=500,V=.3,F=10,A=[{path:"/",page:s=>p(()=>import("./options-a3zkT5xn.js"),__vite__mapDeps([0,1]),import.meta.url).then(t=>new t.Options(s))},{path:"/options",page:s=>p(()=>import("./options-a3zkT5xn.js"),__vite__mapDeps([0,1]),import.meta.url).then(t=>new t.Options(s))},{path:"/wheel",page:s=>p(()=>import("./wheel-DpM_Kv5d.js"),__vite__mapDeps([2,1]),import.meta.url).then(t=>new t.Wheel(s))}],H={spin:N,end:y,baraban:C};var g=(s=>(s[s.title=0]="title",s[s.weight=1]="weight",s))(g||{});function P(s){return!!(s.title&&s.weight)}class b{constructor(){l(this,"id",f);l(this,"stateItems",[]);l(this,"isSoundMute",!1);l(this,"updateOptionState",(t,e)=>{const o=this.stateItems.find(i=>i.id===t.id);o&&(e===g.title&&(o.title=t.title),e===g.weight&&(o.weight=t.weight),this.updateLocalStorage())});localStorage.getItem("ketrololz-state")===null&&this.add({id:1})}add(t){this.stateItems.push(t),this.id+=1,this.updateLocalStorage()}remove(t){this.stateItems=this.stateItems.filter(e=>e.id!==t),this.stateItems.length<1&&(this.id=f),this.updateLocalStorage()}clear(){this.stateItems=[],this.id=f,this.updateLocalStorage()}getId(){return this.id}getOptions(){return this.stateItems}isSoundMuteState(){return this.isSoundMute}changeSoundState(t){this.isSoundMute=t,this.updateLocalStorage()}loadState(){try{const t=localStorage.getItem("ketrololz-state"),e=localStorage.getItem("ketrololz-last-id"),o=localStorage.getItem("ketrololz-is-sound-mute");t&&(this.stateItems=JSON.parse(t)),e&&(this.id=JSON.parse(e)),o&&(this.isSoundMute=JSON.parse(o))}catch{this.stateItems=[]}}setState(t){this.stateItems=t.map(e=>(e.id.toString().startsWith("#")&&(e.id=Number(e.id.toString().substring(1))),e.id>=this.id&&(this.id=e.id+1),typeof e.weight=="string"&&(e.weight=Number(e.weight)),e)),this.updateLocalStorage()}getSectorOptions(){return this.getOptions().filter(P)}updateLocalStorage(){localStorage.setItem("ketrololz-state",JSON.stringify(this.stateItems)),localStorage.setItem("ketrololz-last-id",JSON.stringify(this.id)),localStorage.setItem("ketrololz-is-sound-mute",JSON.stringify(this.isSoundMute))}}const R=new b;class M{constructor(t,e){l(this,"routes",[]);l(this,"outlet");l(this,"state",R);this.routes=t,this.outlet=e,this.navigate(window.location.pathname),window.addEventListener("popstate",()=>this.navigate(window.location.pathname))}canCreateWheel(){return this.state.getSectorOptions().length>1}createPage(t){const e=this.routes.find(o=>o.path===t);e?(this.outlet.destroyChildren(),e.page(this).then(o=>this.outlet.appendChildren([o.getNode()]))):(this.outlet.destroyChildren(),p(()=>import("./notFound-BWLvRKmZ.js"),__vite__mapDeps([3,1]),import.meta.url).then(o=>new o.NotFound(this)).then(o=>this.outlet.appendChildren([o.getNode()])))}navigate(t){this.state.loadState(),t==="/wheel"&&!this.canCreateWheel()&&(t="/options"),window.history.pushState(null,"",t),this.createPage(t)}}class T extends w{constructor(){super({tag:"div",className:"app"});l(this,"body",document.body);this.body.appendChild(this.getNode()),new M(A,this)}}new T;export{H as A,w as B,k as C,g as D,W as M,z as P,x as W,V as a,F as b,B as c,J as d,P as i,R as o};
