var xe=Object.defineProperty;var fe=l=>{throw TypeError(l)};var Ce=(l,e,s)=>e in l?xe(l,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[e]=s;var g=(l,e,s)=>Ce(l,typeof e!="symbol"?e+"":e,s),ge=(l,e,s)=>e.has(l)||fe("Cannot "+s);var t=(l,e,s)=>(ge(l,e,"read from private field"),s?s.call(l):e.get(l)),c=(l,e,s)=>e.has(l)?fe("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(l):e.set(l,s),r=(l,e,s,o)=>(ge(l,e,"write to private field"),o?o.call(l,s):e.set(l,s),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();class Se{constructor(e,s=1,...o){g(this,"element",null);g(this,"state",0);g(this,"position",0);const i=document.createElement("div");o&&i.classList.add(o),i.style.width=`${s}vmin`,i.style.height=`${s}vmin`,e.append(i),this.element=i}paint(){return this.state===1?(this.element.classList.contains("painted")&&this.element.classList.add("hide"),this.element.addEventListener("animationend",e=>{e.animationName==="hide"&&(this.element.classList.remove("hide"),this.element.classList.remove("painted"))}),this.state=0,this.state):(this.element.classList.add("painted"),this.element.classList.remove("cross"),this.state=1,this.state)}markWithCross(){if(this.element.classList.remove("painted"),this.element.classList.contains("cross")&&this.element.classList.add("hide"),this.element.addEventListener("animationend",e=>{(e.animationName==="hide"||e.animationName==="hide-dark")&&(this.element.classList.remove("hide"),this.element.classList.remove("cross"))}),this.element.classList.add("cross"),this.state===1)return this.state=0,this.state}}class Oe{constructor(e,...s){g(this,"element",null);const o=document.createElement("div");s&&o.classList.add(s),e.append(o),this.element=o}}const Ie={cockerel:[[0,1,0,0,0],[1,1,0,1,1],[0,1,1,1,0],[0,1,1,1,0],[0,0,1,0,0]],heart:[[0,1,0,1,0],[1,1,1,1,1],[1,1,1,1,1],[0,1,1,1,0],[0,0,1,0,0]],helmet:[[1,1,1,1,1],[1,1,1,1,1],[1,0,1,0,1],[1,0,0,0,1],[0,1,0,1,0]],tower:[[1,0,1,0,1],[1,1,1,1,1],[0,1,0,1,0],[0,1,1,1,0],[1,1,1,1,1]],note:[[0,1,1,1,1],[0,1,0,0,1],[0,1,0,0,1],[1,1,0,1,1],[1,1,0,1,1]]},Be={bomb:[[0,0,1,1,1,1,0,0,0,0],[0,1,1,0,0,1,1,0,0,0],[0,1,0,0,0,0,1,0,0,0],[1,0,1,0,0,1,0,1,0,0],[0,1,0,0,1,1,1,1,1,0],[1,0,0,1,1,1,1,0,1,1],[0,0,0,1,1,1,1,1,0,1],[0,0,0,1,1,1,1,1,0,1],[0,0,0,1,1,1,1,1,1,1],[0,0,0,0,1,1,1,1,1,0]],goblet:[[1,1,1,1,1,1,1,1,1,1],[1,0,1,1,0,0,1,1,0,1],[1,0,1,1,0,0,1,1,0,1],[1,0,1,1,0,0,1,1,0,1],[0,1,1,1,0,0,1,1,1,0],[0,0,0,1,1,1,1,0,0,0],[0,0,0,0,1,1,0,0,0,0],[0,0,0,0,1,1,0,0,0,0],[0,0,0,1,1,1,1,0,0,0],[0,0,1,1,1,1,1,1,0,0]],teapot:[[1,1,0,0,1,1,1,1,1,0],[1,1,0,1,1,1,1,1,1,1],[0,1,0,1,0,0,0,0,0,1],[0,1,0,1,0,0,1,0,0,1],[0,0,0,0,1,1,1,1,1,0],[1,1,0,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,0,1],[0,1,1,1,1,1,1,1,0,1],[0,0,1,1,1,1,1,1,1,1],[0,0,0,1,1,1,1,1,1,1]],hippo:[[1,1,1,0,1,1,1,0,1,1],[1,1,1,1,0,0,0,0,1,1],[1,1,1,0,0,0,0,0,1,1],[1,1,0,1,0,0,1,0,0,1],[0,0,0,0,0,0,0,0,0,1],[0,1,1,0,0,1,1,0,0,0],[0,1,1,0,0,1,1,0,1,0],[1,0,0,1,1,0,0,1,1,0],[1,1,1,1,1,1,1,1,0,0],[1,1,0,0,0,0,0,0,0,0]],mouse:[[0,0,1,1,0,0,0,1,1,0],[0,1,0,0,1,0,1,0,0,1],[0,1,0,1,1,1,1,1,0,1],[0,0,1,1,0,1,0,1,1,0],[0,0,0,1,1,1,1,1,0,0],[0,0,1,1,1,0,1,1,1,0],[1,0,1,1,1,1,1,1,1,1],[1,0,1,1,1,1,1,1,1,1],[1,0,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,0]]},Ne={"ghost busters":[[0,0,0,0,1,0,0,0,1,0,1,0,0,0,0],[0,0,1,1,0,0,0,0,0,1,1,1,1,0,0],[0,1,1,1,0,1,0,1,0,1,1,1,1,1,0],[0,1,1,0,0,0,0,0,0,0,1,1,1,1,0],[1,1,1,0,0,0,1,0,0,0,1,1,1,1,1],[1,1,1,0,0,0,1,0,0,1,1,1,1,1,0],[1,1,1,1,0,0,0,0,1,1,1,1,0,0,0],[1,1,1,0,0,1,1,1,1,1,1,0,0,0,1],[1,1,0,0,0,0,1,1,1,1,0,1,0,0,0],[0,0,0,0,1,1,1,1,1,0,0,0,1,1,1],[1,0,0,1,1,1,1,1,0,0,0,0,1,1,1],[0,1,0,1,1,1,1,0,0,0,0,1,1,1,0],[0,1,1,1,1,1,0,0,0,0,1,1,1,1,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,0,0,1,1,1,1,1,1,1,0,0,0,0]],smile:[[0,0,1,1,1,1,0,0,0,1,1,1,1,0,0],[0,1,1,0,0,1,1,0,1,1,0,0,1,1,0],[1,1,1,1,0,1,1,0,1,1,1,0,1,1,1],[1,1,1,1,1,1,1,0,1,1,1,1,1,1,1],[1,1,1,1,0,0,1,0,1,1,1,1,0,0,1],[1,1,1,1,0,0,1,0,1,1,1,1,0,0,1],[1,1,1,1,1,1,1,0,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,0,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],[0,0,0,1,1,1,0,0,0,1,1,1,0,0,0],[1,1,0,0,0,0,0,0,0,0,0,0,0,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,1,1,1,0,0,0,0,0,1,1,1,0,0],[0,0,0,0,1,1,1,1,1,1,1,0,0,0,0]],squid:[[1,1,1,1,1,1,1,0,0,0,0,1,1,1,0],[1,1,1,1,1,1,0,0,0,0,1,1,0,1,1],[1,1,1,1,1,1,1,0,0,0,1,0,0,0,1],[1,1,1,1,1,1,1,1,1,0,1,1,1,0,1],[1,1,1,1,1,1,1,1,1,1,0,0,0,0,1],[1,0,1,1,1,1,1,1,1,1,1,0,0,0,1],[0,0,0,1,1,1,1,1,1,1,1,0,0,1,1],[0,0,0,1,1,1,1,1,0,1,1,1,1,1,0],[0,0,0,0,1,1,0,1,1,1,0,0,0,0,0],[0,0,0,0,1,1,1,1,0,1,1,1,0,0,1],[0,1,1,0,0,1,0,1,0,1,0,1,1,0,1],[1,1,0,0,0,1,0,1,0,1,1,0,1,1,1],[1,0,0,0,0,1,0,1,1,0,1,0,0,0,0],[1,1,0,0,1,1,0,0,1,0,1,1,0,0,1],[0,1,1,1,1,0,1,1,1,0,0,1,1,1,1]],snail:[[1,1,0,1,1,0,0,0,0,0,0,0,0,0,0],[1,1,0,1,1,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,1,0,0,0,1,1,1,1,1,0,0],[0,1,0,0,1,0,0,1,1,1,1,1,1,1,0],[0,1,1,1,1,0,1,1,0,0,0,0,1,1,1],[1,1,0,0,1,1,1,1,0,1,1,1,0,1,1],[1,0,0,0,0,1,1,0,1,1,1,1,1,0,1],[1,0,0,1,0,1,1,0,1,1,0,1,1,0,1],[1,0,1,1,0,1,1,0,1,1,0,1,1,0,1],[1,0,0,0,0,1,1,0,1,1,1,0,0,1,1],[1,1,0,0,0,0,1,1,0,1,1,1,1,1,1],[0,1,0,0,0,0,0,1,1,1,1,1,1,1,0],[0,1,1,0,0,0,0,0,0,1,1,1,1,1,1],[0,0,1,1,1,0,0,0,0,0,0,0,0,0,1],[0,0,0,0,1,1,1,1,1,1,1,1,1,1,0]],cash:[[0,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,0,0,1,1,0,0,0,1,0,0,1,1,0],[0,1,1,0,0,0,0,0,0,0,0,1,1,0,0],[0,0,1,1,1,0,0,0,0,0,1,1,1,0,0],[0,0,0,0,1,0,1,1,1,1,1,0,0,0,0],[0,0,1,1,1,0,0,0,0,0,1,1,1,0,0],[0,1,1,0,0,0,1,0,1,0,0,1,1,1,0],[0,1,0,0,0,1,1,1,1,1,0,0,1,1,1],[1,1,0,0,1,0,1,0,1,0,1,0,0,1,1],[1,0,0,0,1,0,1,0,1,0,0,0,0,1,1],[1,0,0,0,0,1,1,1,1,1,0,0,0,1,1],[1,0,0,0,0,0,1,0,1,0,1,0,0,1,1],[1,1,0,0,1,0,1,0,1,0,1,0,0,1,1],[1,1,1,0,0,1,1,1,1,1,0,0,1,1,1],[0,1,1,1,0,0,1,0,1,0,0,1,1,1,0]]},W={easy:Ie,medium:Be,hard:Ne};function f(l){const{tag:e="div",parent:s,classes:o,text:i=""}=l,a=document.createElement(e);return o&&a.classList.add(...o),s&&s.appendChild(a),a.textContent=i,a}var _;class Me{constructor(){g(this,"element",null);c(this,_,null);const e=document.createElement("dialog");e.classList.add("modal-container"),this.element=e}clear(){for(;this.element.childNodes.length>0;)this.element.lastChild.remove()}showWindow(e){this.element.showModal(),this.element.textContent=`Great! You have solved the nonogram in ${(e.currTime()-1e3)/1e3} seconds!`;const s=f({tag:"button",classes:["close-button","button"],text:"close"});s.addEventListener("mousedown",()=>{this.closeWindow(),t(this,_).playSound("click")}),this.element.appendChild(s)}closeWindow(){this.element.close()}getElem(){return this.element}setAudio(e){r(this,_,e)}appendNode(e){e.append(this.element)}}_=new WeakMap;var L,ee,te,Y;class Te{constructor(){c(this,L,null);c(this,ee,1e3);g(this,"time",0);c(this,te,null);c(this,Y,!1);const e=document.createElement("div");e.classList.add("timer"),r(this,L,e)}clear(){for(;t(this,L).childNodes.length>0;)t(this,L).lastChild.remove()}getElem(){return t(this,L)}startTimer(){this.updateTime(),r(this,te,setInterval(this.updateTime.bind(this),t(this,ee))),r(this,Y,!0)}updateTime(){const o=Math.trunc(this.time/6e4),i=Math.trunc(this.time%6e4/1e3);this.time+=t(this,ee),t(this,L).textContent=`${String(o).padStart(2,"0")}:${String(i).padStart(2,"0")}`}stopTimer(){clearInterval(t(this,te)),r(this,Y,!1)}clearTimer(){this.time=0,t(this,L).textContent="00:00"}currTime(){return this.time}setTime(e){this.time=e,this.updateTime()}isTimerOn(){return t(this,Y)}appendNode(e){e.append(t(this,L))}}L=new WeakMap,ee=new WeakMap,te=new WeakMap,Y=new WeakMap;const ke=""+new URL("Gludio-Dp2fvuep.mp3",import.meta.url).href,Fe="data:audio/wav;base64,UklGRggDAABXQVZFZm10IBAAAAABAAEAgLsAAAB3AQACABAAZGF0YeQCAAAAAAAAQfxj/m0SWhas+lLvtAvMI00SmfJw97cP+Q6wADv/1f+980fxBQdIDfXv1dxa8lQQvgZM6WrrDQETBXz/YwRnB1P51/aWEQwaOwP9/vkA5OrB4poIwRkO63rB0d97GroQp90p5tX/S/RYAhVBe0Cn4VXOhTzZeMApU8zg7YU+6jBE/WX8M/zk1knYih+bJHq5j4xS6R47iQc8qgbAGAwFEZT7pAzPDrrub/PCIzoufQGB6AcD+iB3EzP6y/ttABX4o/pICxoFtOOa3wwE/BJm973fGu/ECMAF3/my/bsAYPoy/6ATTBSq+Sny4QtwHBQMq/X4+psKIAgBAAQBSf+29BH1BgW4BGT8Sv7xADb8K/7mDH4Pfv2c9YoF6RO+Cnj5a/u4BisGWgCWABcAjfhm9zMD5AYx+bPv+PjTBk4DP/fc9xgAkQH3/5cCoANl/Q38VgYMDH8Dxvla/lwJCwjm/h/+if+S+ev59AW2BaDyWOyn/S8KBwDz8IP1swJDA0T+fP8cAWf9IP7gB28Kh/9++dIBawsPB8X8Ef0jA0sDSQBZAEwAQfw7+xIBkQOL/T34+fvhAu4BX/w4/L3/sAD//wsC8AKE/g39dwO7BxMDV/x2/oUEvgPV/3H/7P8p/gP+ewHhAaH8Tvqs/tICdQDh+7f8kAADAZb/u/9bAFr/Uv8BAgUDNwAh/iAAJQNEAi//B//OAAYBKwAAABcARf/y/hMA0QCe/zT+6f6UAJEAL//8/tP/OAD//xYATADh/5z/WQAEAYMAf/+n/7oAzgABALP/AQArAP//AQAVAMr/c//J/0wAFwBm/2j/DAA1AOH/p//h////AAALACwACwDU//X/VwBMAO3/xf8lAD8AFQDu/+//BgDy//b/CwDz/8z/0/8MABQA4f+9/+z/CQABAOr/9f8AAPX/AAAWAAsA6v/q/xYAIQAAAOn/AwASAA4A8//2/wAA9f/1/wAAAADq/w==",ze=""+new URL("cross-B5nIBPxR.wav",import.meta.url).href,Pe=""+new URL("paint-7d4Kd7k4.wav",import.meta.url).href,De=""+new URL("win-CnyxwIIM.wav",import.meta.url).href;var N,$;class ue{constructor(){c(this,N,null);c(this,$,null);r(this,N,new Audio),r(this,$,new Audio),t(this,N).setAttribute("autoplay",!0),t(this,N).loop=!0}getSoundsObj(){return t(this,$)}getTracksList(){return{theme:ke,click:Fe,cross:ze,paint:Pe,win:De}}setSound(e){t(this,$).src=e}setMusic(e){t(this,N).src=e}getMusicObj(){return t(this,N)}playSound(e){this.setSound(this.getTracksList()[e]),this.getSoundsObj().play()}}N=new WeakMap,$=new WeakMap;var M,U,C,J,u,se,m,v,X,T,k,ie,R,q,F,K,H,ne,G;class je{constructor(){g(this,"element",null);c(this,M,0);c(this,U,0);c(this,C,W.easy.cockerel);c(this,J,"cockerel");c(this,u,"easy");g(this,"currFieldElements",[]);g(this,"currFieldValue",[]);g(this,"currFieldCrosses",[]);g(this,"currHintElements",[]);c(this,se,null);c(this,m,null);c(this,v,!1);c(this,X,null);c(this,T,null);c(this,k,null);c(this,ie,null);c(this,R,null);c(this,q,null);c(this,F,!1);c(this,K,null);c(this,H,null);c(this,ne,"light");c(this,G,"on");g(this,"hintSize",{easy:2,medium:3,hard:5});const e=document.createElement("div");e.classList.add("game-field"),this.element=e}appendNode(e){e.append(this.element)}createCells(){const e=t(this,M)*t(this,M);let s=0;for(let n=0;n<e;n+=1)if(n===0){const d=new Se(this.element,t(this,U)*this.hintSize[t(this,u)],"empty-cell");r(this,q,d),t(this,u)==="medium"&&d.element.classList.add("medium"),t(this,u)==="hard"&&d.element.classList.add("hard")}else if(n<t(this,M)||n%t(this,M)===0){const d=new Oe(this.element,"hint");n%5===0&&(t(this,u)==="easy"&&(n<6?d.element.classList.add("line","vertical"):d.element.classList.add("line")),t(this,u)==="medium"&&(n<11?d.element.classList.add("line","vertical","medium"):d.element.classList.add("line","medium")),t(this,u)==="hard"&&(n<16?d.element.classList.add("line","vertical","hard"):d.element.classList.add("line","hard"))),this.currHintElements.push(d)}else{const d=new Se(this.element,t(this,U),"cell");d.position=s,this.currFieldElements.push(d),this.currFieldValue.push(d.state),s+=1}this.currFieldElements.forEach(n=>n.element.addEventListener("mousedown",d=>{if(d.button===0){if(t(this,v))return;n.paint(),t(this,H).playSound("paint"),this.currFieldValue[n.position]=n.state,this.currFieldCrosses[n.position]=0,t(this,m).isTimerOn()||t(this,m).startTimer(),this.checkInput()}if(d.button===2){if(t(this,v))return;n.markWithCross(),t(this,H).playSound("cross"),this.currFieldValue[n.position]=n.state,this.currFieldCrosses[n.position]=2,t(this,m).isTimerOn()||t(this,m).startTimer(),this.checkInput()}}));let o=!1,i=null;this.currFieldElements.forEach(n=>n.element.addEventListener("touchstart",async d=>{if(i===null&&(i=d.target),o=!0,await a(),o&&i===d.target){if(o=!1,t(this,v))return;n.markWithCross(),this.currFieldValue[n.position]=n.state,this.currFieldCrosses[n.position]=2,t(this,m).isTimerOn()||t(this,m).startTimer(),this.checkInput()}}));function a(){return new Promise(n=>setTimeout(n,600))}this.currFieldElements.forEach(n=>n.element.addEventListener("touchend",()=>{o=!1,i=null})),window.addEventListener("contextmenu",n=>n.preventDefault(),!1)}getEmptyCell(){return t(this,q)}changeHints(){const e=t(this,C),s=[],o=[];let i=0;for(let a=0;a<e.length;a+=1){let n=[];for(let d=0;d<e.length;d+=1)e[a][d]===1&&(i+=1),e[a][d]===0&&(i!==0&&n.push(i),i=0),d===e.length-1&&(i!==0&&n.push(i),i=0,o.push(n),n=[])}for(let a=0;a<e.length;a+=1){let n=[];for(let d=0;d<e.length;d+=1)e[d][a]===1&&(i+=1),e[d][a]===0&&(i!==0&&n.push(i),i=0),d===e.length-1&&(i!==0&&n.push(i),i=0,s.push(n),n=[])}for(let a=0;a<this.currHintElements.length;a+=1)a<this.currHintElements.length/2?(s[a].forEach(n=>{this.createHintNum(n,a)}),this.currHintElements[a].element.classList.add("vertical")):o[a-this.currHintElements.length/2].forEach(n=>{this.createHintNum(n,a)})}createHintNum(e,s){const o=document.createElement("span");o.textContent=e,o.classList.add("hint-value"),this.currHintElements[s].element.append(o)}updateState(){this.currFieldElements=[],this.currHintElements=[],this.currFieldValue=[],this.currFieldCrosses=[],this.createCells(),this.createTimer(),t(this,m).clearTimer(),t(this,m).stopTimer(),this.changeHints(),r(this,v,!1)}changePicture(e){r(this,C,W[t(this,u)][e]),r(this,J,e)}changeDifficulty(e){r(this,u,e)}getDifficulty(){return t(this,u)}getRandomImage(){const e=t(this,u),s=t(this,J),o=Math.floor(Math.random()*3),i=Math.floor(Math.random()*5),a={0:"easy",1:"medium",2:"hard"};this.changeDifficulty(a[o]);const n=Object.keys(W[t(this,u)])[i];this.changePicture(n),e===a[o]&&s===Object.keys(W[t(this,u)])[i]&&this.getRandomImage(),r(this,T,o),r(this,k,i)}createField(e,s,o){const i={easy:5,medium:10,hard:15},a={easy:6,medium:5,hard:4};r(this,F,JSON.parse(localStorage.getItem("canLoad"))),t(this,F)&&(t(this,K).disabled=!1),r(this,X,e),r(this,ie,s),r(this,R,o),t(this,R).clear();for(const n in W[t(this,u)])t(this,R).addOptions(n);s.element.selectedIndex=t(this,T),o.element.selectedIndex=t(this,k),this.element.classList.add("game-field"),this.element.style.gridTemplateColumns=`${a[t(this,u)]*this.hintSize[t(this,u)]}vmin repeat(${i[t(this,u)]}, ${a[t(this,u)]}vmin)`,this.element.style.gridTemplateRows=`${a[t(this,u)]*this.hintSize[t(this,u)]}vmin repeat(${i[t(this,u)]}, ${a[t(this,u)]}vmin)`,r(this,M,i[t(this,u)]+1),r(this,U,a[t(this,u)]),this.updateState()}updateSelectors(e,s){r(this,T,e.element.selectedIndex),r(this,k,s.element.selectedIndex)}checkInput(){if(this.currFieldValue.join("")===t(this,C).flat().join("")){const e=new ue;t(this,se).showWindow(t(this,m)),r(this,v,!0),t(this,m).stopTimer(),t(this,X).saveResult(t(this,m).currTime()-1e3,t(this,u),t(this,J)),e.playSound("win")}}createModal(e){const s=new Me;s.appendNode(e),s.getElem().addEventListener("mousedown",o=>{o.target!==s.getElem()&&s.closeWindow()}),s.setAudio(t(this,H)),r(this,se,s)}createTimer(){const e=new Te;e.getElem().textContent="00:00",r(this,m,e),e.appendNode(t(this,q).element)}getTimer(){return t(this,m)}showSolution(){r(this,v,!0),t(this,m).stopTimer(),this.currFieldElements.forEach((e,s)=>{e.element.classList.remove("painted","cross"),t(this,C).flat()[s]===1&&e.element.classList.add("painted")})}resetGame(){this.clear(),this.updateState()}saveGame(){r(this,F,!0),t(this,K).disabled=!1,t(this,v)||(localStorage.setItem("time",t(this,m).currTime()),localStorage.setItem("difficulty",t(this,u)),localStorage.setItem("picture",JSON.stringify(t(this,C))),localStorage.setItem("values",JSON.stringify(this.currFieldValue)),localStorage.setItem("name",JSON.stringify(this.currFielname)),localStorage.setItem("crosses",JSON.stringify(this.currFieldCrosses)),localStorage.setItem("canLoad",JSON.stringify(t(this,F))),localStorage.setItem("soundState",JSON.stringify(t(this,G))),localStorage.setItem("diffSelectorIndex",JSON.stringify(t(this,T))),localStorage.setItem("picSelectorIndex",JSON.stringify(t(this,k))))}canSave(){return!t(this,v)}setLoadButton(e){r(this,K,e)}setAudio(e){r(this,H,e)}setTheme(e){e==="dark"&&document.body.classList.add("dark"),e==="light"&&document.body.classList.add("light"),r(this,ne,e)}setSoundState(e,s){r(this,G,e),e==="on"&&s.getSlider().classList.add("active"),e==="off"&&s.getSlider().classList.remove("active")}getTheme(){return t(this,ne)}getSoundState(){return t(this,G)}loadGame(){t(this,F)&&(this.clear(),r(this,u,localStorage.getItem("difficulty")),r(this,C,JSON.parse(localStorage.getItem("picture"))),r(this,J,localStorage.getItem("name")),r(this,T,JSON.parse(localStorage.getItem("diffSelectorIndex"))),r(this,k,JSON.parse(localStorage.getItem("picSelectorIndex"))),this.createField(t(this,X),t(this,ie),t(this,R)),t(this,m).setTime(JSON.parse(localStorage.getItem("time"))),this.currFieldValue=JSON.parse(localStorage.getItem("values")),this.currFieldCrosses=JSON.parse(localStorage.getItem("crosses")),r(this,G,JSON.parse(localStorage.getItem("soundState"))),this.currFieldElements.forEach((e,s)=>{this.currFieldValue[s]===1&&(e.element.classList.add("painted"),e.state=1),this.currFieldCrosses[s]===2&&e.element.classList.add("cross")}))}clear(){for(;this.element.childNodes.length>0;)this.element.lastChild.remove()}}M=new WeakMap,U=new WeakMap,C=new WeakMap,J=new WeakMap,u=new WeakMap,se=new WeakMap,m=new WeakMap,v=new WeakMap,X=new WeakMap,T=new WeakMap,k=new WeakMap,ie=new WeakMap,R=new WeakMap,q=new WeakMap,F=new WeakMap,K=new WeakMap,H=new WeakMap,ne=new WeakMap,G=new WeakMap;class Ae{constructor(){g(this,"element",null);const e=document.createElement("select");e.classList.add("selector"),this.element=e}addOptions(...e){for(const s of e){const o=document.createElement("option");o.value=s,o.textContent=s,this.element.appendChild(o)}}clear(){for(;this.element.childNodes.length>0;)this.element.lastChild.remove()}getElem(){return this.element}getChilds(){return this.element.childNodes}appendNode(e){e.append(this.element)}}var A,S;class We{constructor(){c(this,A,null);c(this,S,[]);const e=document.createElement("div");e.classList.add("best-results");const s=document.createElement("h2");s.textContent="Best results",e.appendChild(s);for(let o=0;o<5;o+=1){const i={time:"---",difficulty:"---",picture:"---"};t(this,S).push(i)}r(this,A,e),this.renderResults()}clear(){for(;t(this,A).childNodes.length>0;)t(this,A).lastChild.remove()}getElem(){return t(this,A)}showWindow(){t(this,A).classList.toggle("open")}hideWindow(){t(this,A).classList.remove("open")}loadResults(){localStorage.getItem("results")&&r(this,S,JSON.parse(localStorage.getItem("results")))}renderResults(){this.loadResults();for(let e=0;e<t(this,S).length;e+=1){const i=Math.trunc(t(this,S)[e].time/6e4),a=Math.trunc(t(this,S)[e].time%6e4/1e3),n=document.createElement("div");n.classList.add("result");for(let d=0;d<3;d+=1){const be={0:t(this,S)[e].picture,1:t(this,S)[e].difficulty,2:`${String(i).padStart(2,"0")}:${String(a).padStart(2,"0")}`},le=document.createElement("p");le.classList.add("result-text"),t(this,S)[e].time==="---"?le.textContent="--:--":le.textContent=be[d],n.appendChild(le)}t(this,A).appendChild(n)}}saveResult(e,s,o){for(const i of t(this,S).sort((a,n)=>n.time-a.time)){if(this.clear(),i.time==="---"){i.time=e,i.difficulty=s,i.picture=o;break}if(!t(this,S).some(a=>Object.values(a).includes("---"))&&e<i.time){i.time=e,i.difficulty=s,i.picture=o;break}}t(this,S).sort((i,a)=>i.time-a.time),localStorage.setItem("results",JSON.stringify(t(this,S).sort((i,a)=>i.time-a.time))),this.renderResults()}appendNode(e){e.append(t(this,A))}}A=new WeakMap,S=new WeakMap;var y;class Qe{constructor(){c(this,y,null);const e=document.createElement("div");e.classList.add("menu"),r(this,y,e)}clear(){for(;t(this,y).childNodes.length>0;)t(this,y).lastChild.remove()}getElem(){return t(this,y)}showWindow(){t(this,y).classList.toggle("open")}hideWindow(){t(this,y).classList.remove("open")}appendNode(e){e.append(t(this,y))}}y=new WeakMap;var z,ae;class Je{constructor(){c(this,z,null);c(this,ae,null);const e=f({tag:"div",classes:["switcher-container"]});f({tag:"p",parent:e,classes:["switcher-text"],text:"sound"});const s=f({tag:"div",parent:e,classes:["toggle-slider","active"]});r(this,z,e),r(this,ae,s)}clear(){for(;t(this,z).childNodes.length>0;)t(this,z).lastChild.remove()}getElem(){return t(this,z)}getSlider(){return t(this,ae)}appendNode(e){e.append(t(this,z))}}z=new WeakMap,ae=new WeakMap;var V,P,D,O,ce,de;class Re{constructor(){c(this,V,null);c(this,P,window.innerWidth);c(this,D,window.innerHeight);c(this,O,[]);c(this,ce,25);g(this,"ctx",null);c(this,de,{0:"#d3ef6f",1:"#b4de19",2:"#809C18",3:"#52B605",4:"#C8C20F"});r(this,V,f({tag:"canvas",parent:document.body,classes:["background"]})),t(this,V).width=t(this,P),t(this,V).height=t(this,D),this.ctx=t(this,V).getContext("2d")}createLeaf(){return{angle:Math.random()*Math.PI*2,x:Math.random()*t(this,P),y:Math.random()*t(this,D)-1e3,size:Math.floor(Math.random()*20)+10,speedY:Math.floor(Math.random()*2)+1,rotateSpeed:Math.random()*Math.PI,color:t(this,de)[Math.floor(Math.random()*3)],blur:Math.floor(Math.random()*2)+1,opacity:Math.random()*(.95-.1)+.1}}createLeavesArr(){for(let e=0;e<t(this,ce);e+=1)t(this,O).push(this.createLeaf())}createLeaves(){for(const e of t(this,O))this.ctx.save(),this.ctx.translate(e.x,e.y),this.ctx.rotate(e.angle),this.ctx.beginPath(),this.ctx.bezierCurveTo(e.size,e.size,e.size-e.size*1.2,e.size-e.size*.5,e.size,e.size-e.size*2),this.ctx.bezierCurveTo(e.size+e.size*1.2,e.size-e.size*.5,e.size,e.size,e.size,e.size),this.ctx.fillStyle=e.color,this.ctx.filter=`blur(${e.blur}px)`,this.ctx.globalAlpha=e.opacity,this.ctx.fill(),this.ctx.restore()}updatePosition(){this.ctx.clearRect(0,0,t(this,P),t(this,D));for(let e=0;e<t(this,O).length;e+=1){const s=t(this,O)[e];s.y+=s.speedY,s.angle-=.001,s.y>t(this,D)+50&&(t(this,O)[e]=this.createLeaf()),s.x>t(this,P)+50&&(t(this,O)[e]=this.createLeaf())}}dropLeaves(){this.ctx.clearRect(0,0,t(this,P),t(this,D)),this.createLeaves("green"),window.requestAnimationFrame(()=>{this.updatePosition(),this.dropLeaves()})}}V=new WeakMap,P=new WeakMap,D=new WeakMap,O=new WeakMap,ce=new WeakMap,de=new WeakMap;const we=new Re;we.createLeavesArr();we.dropLeaves();const oe=document.body,I=f({parent:oe,classes:["wrapper"]}),h=new je,b=new Ae,me=f({parent:I,classes:["top-container"]}),ve=f({parent:I,classes:["selectors-container"]}),p=new ue;p.getSoundsObj().volume=.5;h.setAudio(p);b.getElem().addEventListener("mousedown",()=>{p.playSound("click")});const Z=f({tag:"button",parent:me,classes:["solution-button","button"],text:"solution"});Z.addEventListener("mousedown",()=>{h.showSolution(),p.playSound("click"),Z.disabled=!0});const x=new Qe;x.appendNode(I);const Le=f({tag:"button",parent:me,classes:["menu-button","button"],text:"menu"});Le.addEventListener("mousedown",()=>{x.showWindow(),p.playSound("click")});I.addEventListener("mousedown",l=>{l.target===B.getSlider()?I.addEventListener("transitionend",he):he(l)});function he(l){try{l.target!==x.getElem()&&l.target!==Le&&x.hideWindow(),l.target!==j.getElem()&&l.target!==Ee&&j.hideWindow(),this.removeEventListener("transitionend",he)}catch{}}const He=f({tag:"button",parent:x.getElem(),classes:["reset-button","button"],text:"reset"});He.addEventListener("mousedown",()=>{h.resetGame(),p.playSound("click"),Z.disabled=!1});const Ge=f({tag:"button",parent:x.getElem(),classes:["save-button","button"],text:"save game"}),Q=f({tag:"div",parent:I,classes:["save-plate"],text:"saved successfully"});Q.addEventListener("animationend",()=>{Q.classList.remove("active")});Ge.addEventListener("mousedown",()=>{h.canSave()?(h.saveGame(),Q.textContent="saved successfully",Q.classList.remove("error"),Q.classList.add("active")):(Q.textContent="nothing to save",Q.classList.add("active","error")),p.playSound("click")});const pe=f({tag:"button",parent:x.getElem(),classes:["load-button","button"],text:"load game"});h.setLoadButton(pe);pe.addEventListener("mousedown",()=>{h.loadGame(),p.playSound("click"),Z.disabled=!1});const ye=f({tag:"button",parent:x.getElem(),classes:["random-button","button"],text:"random game"});ye.addEventListener("mousedown",()=>{h.clear(),h.getRandomImage(),h.createField(j,b,w),p.playSound("click"),Z.disabled=!1});const re=f({tag:"div",parent:I,classes:["save-plate"],text:"saved successfully"});re.addEventListener("animationend",()=>{re.classList.remove("active")});ye.addEventListener("mousedown",()=>{const l=Math.floor(Math.random()*4),e={0:"You are lucky!",1:"Try to solve it!",2:"Do you like it?",3:"So cool image!",4:"I hope you like it"};re.textContent=e[l],re.classList.add("active")});const j=new We;j.appendNode(I);const Ee=f({tag:"button",parent:me,classes:["best-results-button","button"],text:"best"});Ee.addEventListener("mousedown",()=>{j.showWindow(),p.playSound("click")});const Ve=f({tag:"button",parent:x.getElem(),classes:["switch-button","button"],text:"switch theme"});Ve.addEventListener("mousedown",()=>{oe.classList.toggle("dark"),p.playSound("click"),oe.classList.contains("dark")?h.setTheme("dark"):h.setTheme("light"),localStorage.setItem("theme",JSON.stringify(h.getTheme()))});const B=new Je;B.appendNode(x.getElem());b.element.addEventListener("change",l=>{h.clear(),h.changeDifficulty(l.target.value),h.changePicture(Object.keys(W[l.target.value])[0]),h.updateSelectors(b,w),h.createField(j,b,w),w.clear();for(const e in W[l.target.value])w.addOptions(e);p.playSound("click")});const w=new Ae;w.element.addEventListener("change",l=>{h.clear(),h.changePicture(l.target.value),h.updateSelectors(b,w),h.createField(j,b,w),p.playSound("click")});w.getElem().addEventListener("mousedown",()=>{p.playSound("click")});const E=new ue;E.getMusicObj().volume=0;document.addEventListener("mousedown",()=>{E.getMusicObj().volume=.1,E.getMusicObj().paused&&(E.setMusic(E.getTracksList().theme),E.getMusicObj().play())});function Ye(){h.setTheme(JSON.parse(localStorage.getItem("theme"))),h.setSoundState(JSON.parse(localStorage.getItem("soundState")),B),h.getSoundState()==="on"?(p.getSoundsObj().muted=!1,E.getMusicObj().muted=!1):(p.getSoundsObj().muted=!0,E.getMusicObj().muted=!0),pe.disabled=!0,h.appendNode(I),h.createModal(oe),h.createField(j,b,w),b.appendNode(ve),b.addOptions("easy","medium","hard"),w.appendNode(ve)}Ye();B.getElem().addEventListener("mousedown",()=>{B.getSlider().classList.toggle("active"),B.getSlider().classList.contains("active")?(p.getSoundsObj().muted=!1,E.getMusicObj().muted=!1,h.setSoundState("on",B)):(p.getSoundsObj().muted=!0,E.getMusicObj().muted=!0,h.setSoundState("off",B)),localStorage.setItem("soundState",JSON.stringify(h.getSoundState())),p.playSound("click")});
